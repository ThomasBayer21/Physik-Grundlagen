<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4D-Hyperwürfel Visualisierung | Physik Kursmaterialien</title>
    <link rel="stylesheet" href="assets/css/minimal.css">
    <style>
        .dimension-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .dimension-card {
            background: #ffffff;
            border-radius: 8px;
            padding: 1.5rem;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .dimension-card.highlight {
            border-color: #2563eb;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .dimension-canvas {
            width: 100%;
            height: 250px;
            background: #f8fafc;
            border-radius: 6px;
            margin: 1rem 0;
        }

        #main-canvas {
            width: 100%;
            height: 600px;
            background: #f8fafc;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            margin: 2rem 0;
        }

        .control-panel {
            background: #ffffff;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            margin: 2rem 0;
        }

        .control-row {
            margin: 1rem 0;
        }

        .control-row label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1e293b;
        }

        .control-row input[type="range"] {
            width: 100%;
        }

        .value-display {
            display: inline-block;
            min-width: 60px;
            font-family: monospace;
            font-weight: bold;
            color: #2563eb;
        }

        .info-box {
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .dimension-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .dim-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid #e2e8f0;
            background: #ffffff;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .dim-btn:hover {
            background: #f1f5f9;
        }

        .dim-btn.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-item {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2563eb;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #64748b;
            margin-top: 0.25rem;
        }

        .btn-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>4D-Hyperwürfel Visualisierung</h1>
            <p class="subtitle">Von 1D bis 4D: Eine Reise durch die Dimensionen</p>
        </div>
    </header>

    <nav class="main-nav">
        <div class="container">
            <div class="nav-links">
                <a href="index.html" class="nav-link">Übersicht</a>
                <a href="kinematik.html" class="nav-link">Kinematik</a>
                <a href="kinematik-3d.html" class="nav-link">3D-Vektor</a>
                <a href="hypercube-4d.html" class="nav-link active">4D-Hyperwürfel</a>
                <a href="kraefte.html" class="nav-link">Kräfte</a>
                <a href="energie.html" class="nav-link">Energie</a>
                <a href="formelsammlung.html" class="nav-link">Formeln</a>
            </div>
        </div>
    </nav>

    <main class="container">
        <section class="intro-section">
            <h2>Dimensionen verstehen</h2>
            <p>Ein Hyperwürfel (Tesserakt) ist die 4-dimensionale Verallgemeinerung eines Würfels.
               Genau wie ein 3D-Würfel aus 6 Quadraten besteht, besteht ein 4D-Würfel aus 8 3D-Würfeln!</p>
        </section>

        <div class="dimension-grid">
            <div class="dimension-card">
                <h3>1D - Linie</h3>
                <canvas class="dimension-canvas" id="canvas1D" width="300" height="250"></canvas>
                <div class="info-box">
                    <strong>2 Punkte</strong><br>
                    1 Kante
                </div>
            </div>

            <div class="dimension-card">
                <h3>2D - Quadrat</h3>
                <canvas class="dimension-canvas" id="canvas2D" width="300" height="250"></canvas>
                <div class="info-box">
                    <strong>4 Punkte</strong><br>
                    4 Kanten
                </div>
            </div>

            <div class="dimension-card">
                <h3>3D - Würfel</h3>
                <canvas class="dimension-canvas" id="canvas3D" width="300" height="250"></canvas>
                <div class="info-box">
                    <strong>8 Punkte</strong><br>
                    12 Kanten<br>
                    6 Flächen
                </div>
            </div>

            <div class="dimension-card highlight">
                <h3>4D - Tesserakt</h3>
                <canvas class="dimension-canvas" id="canvas4D" width="300" height="250"></canvas>
                <div class="info-box">
                    <strong>16 Punkte</strong><br>
                    32 Kanten<br>
                    24 Flächen<br>
                    8 Zellen (Würfel)
                </div>
            </div>
        </div>

        <div class="control-panel">
            <h3>Dimension auswählen</h3>
            <div class="dimension-selector">
                <button class="dim-btn" onclick="setDimension(1)">1D</button>
                <button class="dim-btn" onclick="setDimension(2)">2D</button>
                <button class="dim-btn" onclick="setDimension(3)">3D</button>
                <button class="dim-btn active" onclick="setDimension(4)">4D</button>
            </div>
        </div>

        <canvas id="main-canvas" width="800" height="600"></canvas>

        <div class="control-panel">
            <h3>4D-Rotation</h3>

            <div class="control-row">
                <label>
                    XY-Rotation: <span class="value-display" id="xyValue">0</span>°
                </label>
                <input type="range" id="xyRotation" min="0" max="360" value="0" oninput="updateRotation()">
            </div>

            <div class="control-row">
                <label>
                    XZ-Rotation: <span class="value-display" id="xzValue">0</span>°
                </label>
                <input type="range" id="xzRotation" min="0" max="360" value="0" oninput="updateRotation()">
            </div>

            <div class="control-row">
                <label>
                    XW-Rotation (4D): <span class="value-display" id="xwValue">0</span>°
                </label>
                <input type="range" id="xwRotation" min="0" max="360" value="0" oninput="updateRotation()">
            </div>

            <div class="control-row">
                <label>
                    YW-Rotation (4D): <span class="value-display" id="ywValue">0</span>°
                </label>
                <input type="range" id="ywRotation" min="0" max="360" value="0" oninput="updateRotation()">
            </div>

            <div class="control-row">
                <label>
                    ZW-Rotation (4D): <span class="value-display" id="zwValue">0</span>°
                </label>
                <input type="range" id="zwRotation" min="0" max="360" value="0" oninput="updateRotation()">
            </div>

            <div class="control-row">
                <label>
                    Animationsgeschwindigkeit: <span class="value-display" id="speedValue">1.0</span>x
                </label>
                <input type="range" id="animSpeed" min="0" max="3" step="0.1" value="1" oninput="updateSpeed()">
            </div>

            <div class="btn-group">
                <button class="btn-primary" onclick="startAnimation()">Animation starten</button>
                <button class="btn-primary" onclick="stopAnimation()">Stop</button>
                <button class="btn-primary" onclick="resetRotation()">Zurücksetzen</button>
            </div>
        </div>

        <div class="control-panel">
            <h3>Eigenschaften nach Dimension</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-label">Dimension</div>
                    <div class="stat-value" id="statDim">4</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Eckpunkte</div>
                    <div class="stat-value" id="statVertices">16</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Kanten</div>
                    <div class="stat-value" id="statEdges">32</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Flächen</div>
                    <div class="stat-value" id="statFaces">24</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Zellen</div>
                    <div class="stat-value" id="statCells">8</div>
                </div>
            </div>
        </div>

        <div class="formula-list">
            <div class="formula-item">
                <h4>Mathematische Eigenschaften</h4>
                <div class="formula">
                    <strong>n-dimensionaler Hyperwürfel:</strong><br><br>

                    Anzahl Eckpunkte: 2ⁿ<br>
                    Anzahl Kanten: n · 2ⁿ⁻¹<br>
                    Anzahl Flächen: (n choose 2) · 2ⁿ⁻²<br><br>

                    <strong>Tesserakt (n=4):</strong><br>
                    16 Eckpunkte, 32 Kanten, 24 Flächen, 8 Würfel<br><br>

                    <strong>Projektion:</strong><br>
                    4D → 3D → 2D (stereografische Projektion)<br>
                    W-Koordinate bestimmt die Tiefe in der 4. Dimension
                </div>
            </div>

            <div class="formula-item">
                <h4>Konstruktion</h4>
                <div class="formula">
                    <strong>Dimensionale Erweiterung:</strong><br><br>

                    • 0D: Punkt<br>
                    • 1D: Linie = Zwei Punkte, verbunden<br>
                    • 2D: Quadrat = Zwei Linien, parallel verschoben und verbunden<br>
                    • 3D: Würfel = Zwei Quadrate, parallel verschoben und verbunden<br>
                    • 4D: Tesserakt = Zwei Würfel, parallel in der 4. Dimension verschoben und verbunden<br><br>

                    Jede Dimension entsteht durch Verschiebung der vorherigen Dimension
                    in eine neue, orthogonale Richtung!
                </div>
            </div>
        </div>
    </main>

    <script src="assets/js/script.js"></script>
    <script>
        let currentDimension = 4;
        let animationId = null;
        let animationSpeed = 1.0;
        let rotationAngles = { xy: 0, xz: 0, xw: 0, yw: 0, zw: 0 };

        // 4D-Hyperwürfel Vertices
        function generateHypercubeVertices() {
            const vertices = [];
            for (let i = 0; i < 16; i++) {
                const x = (i & 1) ? 1 : -1;
                const y = (i & 2) ? 1 : -1;
                const z = (i & 4) ? 1 : -1;
                const w = (i & 8) ? 1 : -1;
                vertices.push([x, y, z, w]);
            }
            return vertices;
        }

        // 4D-Hyperwürfel Kanten
        function generateHypercubeEdges() {
            const edges = [];
            for (let i = 0; i < 16; i++) {
                for (let j = i + 1; j < 16; j++) {
                    // Zwei Vertices sind verbunden, wenn sie sich in genau einer Koordinate unterscheiden
                    let diff = 0;
                    for (let bit = 0; bit < 4; bit++) {
                        if (((i >> bit) & 1) !== ((j >> bit) & 1)) diff++;
                    }
                    if (diff === 1) {
                        edges.push([i, j]);
                    }
                }
            }
            return edges;
        }

        // 3D-Würfel Vertices
        function generateCubeVertices() {
            const vertices = [];
            for (let i = 0; i < 8; i++) {
                const x = (i & 1) ? 1 : -1;
                const y = (i & 2) ? 1 : -1;
                const z = (i & 4) ? 1 : -1;
                vertices.push([x, y, z, 0]);
            }
            return vertices;
        }

        // 3D-Würfel Kanten
        function generateCubeEdges() {
            const edges = [];
            for (let i = 0; i < 8; i++) {
                for (let j = i + 1; j < 8; j++) {
                    let diff = 0;
                    for (let bit = 0; bit < 3; bit++) {
                        if (((i >> bit) & 1) !== ((j >> bit) & 1)) diff++;
                    }
                    if (diff === 1) {
                        edges.push([i, j]);
                    }
                }
            }
            return edges;
        }

        // Rotationsmatrix für 4D
        function rotate4D(point, angles) {
            let [x, y, z, w] = point;

            // XY-Rotation
            if (angles.xy !== 0) {
                const cos = Math.cos(angles.xy);
                const sin = Math.sin(angles.xy);
                [x, y] = [x * cos - y * sin, x * sin + y * cos];
            }

            // XZ-Rotation
            if (angles.xz !== 0) {
                const cos = Math.cos(angles.xz);
                const sin = Math.sin(angles.xz);
                [x, z] = [x * cos - z * sin, x * sin + z * cos];
            }

            // XW-Rotation (4D!)
            if (angles.xw !== 0) {
                const cos = Math.cos(angles.xw);
                const sin = Math.sin(angles.xw);
                [x, w] = [x * cos - w * sin, x * sin + w * cos];
            }

            // YW-Rotation (4D!)
            if (angles.yw !== 0) {
                const cos = Math.cos(angles.yw);
                const sin = Math.sin(angles.yw);
                [y, w] = [y * cos - w * sin, y * sin + w * cos];
            }

            // ZW-Rotation (4D!)
            if (angles.zw !== 0) {
                const cos = Math.cos(angles.zw);
                const sin = Math.sin(angles.zw);
                [z, w] = [z * cos - w * sin, z * sin + w * cos];
            }

            return [x, y, z, w];
        }

        // Projektion von 4D zu 3D
        function project4Dto3D(point) {
            const [x, y, z, w] = point;
            const distance = 4; // Distanz des Betrachters in der 4. Dimension
            const scale = distance / (distance - w);
            return [x * scale, y * scale, z * scale];
        }

        // Projektion von 3D zu 2D
        function project3Dto2D(point, width, height) {
            const [x, y, z] = point;
            const distance = 5;
            const scale = distance / (distance - z);
            const factor = 80;
            return [
                width / 2 + x * scale * factor,
                height / 2 - y * scale * factor
            ];
        }

        // Zeichne Hyperwürfel auf Main Canvas
        function drawMainCanvas() {
            const canvas = document.getElementById('main-canvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            let vertices, edges;

            if (currentDimension === 4) {
                vertices = generateHypercubeVertices();
                edges = generateHypercubeEdges();
            } else if (currentDimension === 3) {
                vertices = generateCubeVertices();
                edges = generateCubeEdges();
            } else if (currentDimension === 2) {
                vertices = [[-1, -1, 0, 0], [1, -1, 0, 0], [1, 1, 0, 0], [-1, 1, 0, 0]];
                edges = [[0, 1], [1, 2], [2, 3], [3, 0]];
            } else if (currentDimension === 1) {
                vertices = [[-1, 0, 0, 0], [1, 0, 0, 0]];
                edges = [[0, 1]];
            }

            // Rotieren und projizieren
            const rotatedVertices = vertices.map(v => rotate4D(v, rotationAngles));
            const projected3D = rotatedVertices.map(v => project4Dto3D(v));
            const projected2D = projected3D.map(v => project3Dto2D(v, width, height));

            // Kanten zeichnen
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            edges.forEach(([i, j]) => {
                ctx.beginPath();
                ctx.moveTo(projected2D[i][0], projected2D[i][1]);
                ctx.lineTo(projected2D[j][0], projected2D[j][1]);
                ctx.stroke();
            });

            // Eckpunkte zeichnen
            ctx.fillStyle = '#ef4444';
            projected2D.forEach(([x, y]) => {
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });

            // Info
            ctx.fillStyle = '#1e293b';
            ctx.font = '16px Arial';
            ctx.fillText(`${currentDimension}D-Objekt`, 20, 30);
        }

        // Zeichne kleine Vorschau-Canvas
        function draw1D() {
            const canvas = document.getElementById('canvas1D');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(width * 0.3, height / 2);
            ctx.lineTo(width * 0.7, height / 2);
            ctx.stroke();

            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(width * 0.3, height / 2, 5, 0, 2 * Math.PI);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(width * 0.7, height / 2, 5, 0, 2 * Math.PI);
            ctx.fill();
        }

        function draw2D() {
            const canvas = document.getElementById('canvas2D');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const size = 80;
            const cx = width / 2;
            const cy = height / 2;

            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 3;
            ctx.strokeRect(cx - size, cy - size, size * 2, size * 2);

            ctx.fillStyle = '#ef4444';
            [[-1, -1], [1, -1], [1, 1], [-1, 1]].forEach(([x, y]) => {
                ctx.beginPath();
                ctx.arc(cx + x * size, cy + y * size, 5, 0, 2 * Math.PI);
                ctx.fill();
            });
        }

        function draw3D() {
            const canvas = document.getElementById('canvas3D');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const vertices = generateCubeVertices();
            const edges = generateCubeEdges();

            const angle = Date.now() * 0.001;
            const rotated = vertices.map(v => rotate4D(v, { xy: angle, xz: angle * 0.7, xw: 0, yw: 0, zw: 0 }));
            const projected3D = rotated.map(v => project4Dto3D(v));
            const projected2D = projected3D.map(v => project3Dto2D(v, width, height));

            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            edges.forEach(([i, j]) => {
                ctx.beginPath();
                ctx.moveTo(projected2D[i][0], projected2D[i][1]);
                ctx.lineTo(projected2D[j][0], projected2D[j][1]);
                ctx.stroke();
            });

            ctx.fillStyle = '#ef4444';
            projected2D.forEach(([x, y]) => {
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });
        }

        function draw4D() {
            const canvas = document.getElementById('canvas4D');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const vertices = generateHypercubeVertices();
            const edges = generateHypercubeEdges();

            const angle = Date.now() * 0.001;
            const rotated = vertices.map(v => rotate4D(v, {
                xy: angle * 0.5,
                xz: angle * 0.3,
                xw: angle,
                yw: angle * 0.7,
                zw: 0
            }));
            const projected3D = rotated.map(v => project4Dto3D(v));
            const projected2D = projected3D.map(v => project3Dto2D(v, width, height));

            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            edges.forEach(([i, j]) => {
                ctx.beginPath();
                ctx.moveTo(projected2D[i][0], projected2D[i][1]);
                ctx.lineTo(projected2D[j][0], projected2D[j][1]);
                ctx.stroke();
            });

            ctx.fillStyle = '#ef4444';
            projected2D.forEach(([x, y]) => {
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, 2 * Math.PI);
                ctx.fill();
            });
        }

        function updateRotation() {
            const toRadians = Math.PI / 180;
            rotationAngles.xy = parseFloat(document.getElementById('xyRotation').value) * toRadians;
            rotationAngles.xz = parseFloat(document.getElementById('xzRotation').value) * toRadians;
            rotationAngles.xw = parseFloat(document.getElementById('xwRotation').value) * toRadians;
            rotationAngles.yw = parseFloat(document.getElementById('ywRotation').value) * toRadians;
            rotationAngles.zw = parseFloat(document.getElementById('zwRotation').value) * toRadians;

            document.getElementById('xyValue').textContent = Math.round(rotationAngles.xy / toRadians);
            document.getElementById('xzValue').textContent = Math.round(rotationAngles.xz / toRadians);
            document.getElementById('xwValue').textContent = Math.round(rotationAngles.xw / toRadians);
            document.getElementById('ywValue').textContent = Math.round(rotationAngles.yw / toRadians);
            document.getElementById('zwValue').textContent = Math.round(rotationAngles.zw / toRadians);

            drawMainCanvas();
        }

        function updateSpeed() {
            animationSpeed = parseFloat(document.getElementById('animSpeed').value);
            document.getElementById('speedValue').textContent = animationSpeed.toFixed(1);
        }

        function setDimension(dim) {
            currentDimension = dim;

            // Update buttons
            document.querySelectorAll('.dim-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === dim - 1);
            });

            // Update stats
            const stats = [
                { vertices: 2, edges: 1, faces: 0, cells: 0 },
                { vertices: 4, edges: 4, faces: 1, cells: 0 },
                { vertices: 8, edges: 12, faces: 6, cells: 1 },
                { vertices: 16, edges: 32, faces: 24, cells: 8 }
            ];

            document.getElementById('statDim').textContent = dim;
            document.getElementById('statVertices').textContent = stats[dim - 1].vertices;
            document.getElementById('statEdges').textContent = stats[dim - 1].edges;
            document.getElementById('statFaces').textContent = stats[dim - 1].faces;
            document.getElementById('statCells').textContent = stats[dim - 1].cells;

            drawMainCanvas();
        }

        function startAnimation() {
            stopAnimation();

            const toRadians = Math.PI / 180;
            animationId = setInterval(() => {
                rotationAngles.xy += 0.01 * animationSpeed;
                rotationAngles.xz += 0.007 * animationSpeed;
                rotationAngles.xw += 0.015 * animationSpeed;
                rotationAngles.yw += 0.012 * animationSpeed;
                rotationAngles.zw += 0.008 * animationSpeed;

                document.getElementById('xyRotation').value = (rotationAngles.xy / toRadians) % 360;
                document.getElementById('xzRotation').value = (rotationAngles.xz / toRadians) % 360;
                document.getElementById('xwRotation').value = (rotationAngles.xw / toRadians) % 360;
                document.getElementById('ywRotation').value = (rotationAngles.yw / toRadians) % 360;
                document.getElementById('zwRotation').value = (rotationAngles.zw / toRadians) % 360;

                updateRotation();
            }, 30);
        }

        function stopAnimation() {
            if (animationId) {
                clearInterval(animationId);
                animationId = null;
            }
        }

        function resetRotation() {
            stopAnimation();
            rotationAngles = { xy: 0, xz: 0, xw: 0, yw: 0, zw: 0 };

            document.getElementById('xyRotation').value = 0;
            document.getElementById('xzRotation').value = 0;
            document.getElementById('xwRotation').value = 0;
            document.getElementById('ywRotation').value = 0;
            document.getElementById('zwRotation').value = 0;

            updateRotation();
        }

        // Animation für Vorschau-Canvas
        function animatePreviewCanvases() {
            draw1D();
            draw2D();
            draw3D();
            draw4D();
            requestAnimationFrame(animatePreviewCanvases);
        }

        // Initialisierung
        window.addEventListener('load', () => {
            setDimension(4);
            animatePreviewCanvases();
        });
    </script>
</body>
</html>
